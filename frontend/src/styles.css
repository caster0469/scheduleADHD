:root {
  --bg: #0f1219;
  --panel: #1d2230;
  --card: #313645;
  --line: #f4c86b;
  color-scheme: dark;
  font-family: Inter, system-ui, sans-serif;
}

* { box-sizing: border-box; }
html, body, #root { margin: 0; min-height: 100%; background: radial-gradient(circle at top, #272d3a, var(--bg) 45%); color: #eceef6; }
button, input, select { font: inherit; }
button { cursor: pointer; }

.app { display: grid; grid-template-columns: 180px minmax(0, 1fr) 220px; min-height: 100vh; }
.sideNav, .detailPanel { padding: 20px 12px; background: rgba(20,24,34,.78); border-right: 1px solid rgba(255,255,255,.08); }
.detailPanel { border-right: 0; border-left: 1px solid rgba(255,255,255,.08); }
.sideNav button { display: block; width: 100%; margin-bottom: 10px; border: 0; border-radius: 14px; padding: 12px; background: #2a2e3a; color: #d8d9de; min-height: 44px; }
.sideNav .active { background: linear-gradient(180deg, #424655, #2a2e3a); }
.main { padding: 20px 24px 100px; max-width: 760px; margin: 0 auto; width: 100%; overflow-x: hidden; }
h1 { text-align: center; letter-spacing: .06em; }
.empty { color: #9ca1b1; }

.rail { position: absolute; left: 50%; top: 96px; bottom: 130px; width: 4px; transform: translateX(-50%); background: linear-gradient(180deg, transparent, rgba(244,200,107,.45), transparent); }
.node { position: relative; margin: 10px 0 18px; padding-left: 72px; }
.node::after { content: ''; position: absolute; left: 26px; top: 52px; bottom: -18px; width: 2px; background: rgba(244, 200, 107, .3); }
.node:last-of-type::after { display: none; }
.node .time { position: absolute; left: 0; top: 24px; color: #bec2d3; font-size: 20px; }
.node .card { border-radius: 18px; min-height: 100px; padding: 14px; display: grid; grid-template-columns: auto 1fr auto; gap: 12px; align-items: center; background: #42464f; border: 1px solid rgba(255,255,255,.18); }
.node.move .card { background: linear-gradient(135deg, #2f6f46, #85af66); }
.node.deadline .card { background: linear-gradient(135deg, #9a6a21, #e6b34f); }
.node.isDone { opacity: .62; }
.node.isDone::after { opacity: .4; }
.doneToggle { width: 44px; height: 44px; border-radius: 999px; }

.catObj { position: relative; display: grid; place-items: center; min-width: 90px; min-height: 74px; }
.catEmoji { filter: grayscale(1); line-height: 1; opacity: .24; pointer-events: none; }
.catLabel { position: absolute; top: 4px; left: 6px; font-weight: 800; letter-spacing: .02em; font-size: 12px; padding: 2px 8px; border-radius: 999px; background: rgba(13,14,18,.45); backdrop-filter: blur(5px); }
.catObj.sm .catEmoji { font-size: 56px; }
.catObj.md .catEmoji { font-size: 70px; }
.catObj.lg .catEmoji { font-size: 84px; }

.addBtn { width: 100%; border-radius: 999px; margin-top: 8px; background: #252937; min-height: 44px; }
.bottomNav { position: fixed; left: 10px; right: 10px; bottom: 8px; padding: 8px; background: rgba(19,21,30,.72); border: 1px solid rgba(255,255,255,.15); border-radius: 28px; display: none; grid-template-columns: repeat(3,1fr); gap: 8px; backdrop-filter: blur(10px); }
.bottomNav button { min-height: 44px; }
.bottomNav button.active { color: #ffd782; }

.todoCreate { display: grid; gap: 8px; margin-bottom: 12px; }
.todoCreate input { min-height: 44px; border-radius: 10px; border: 1px solid #4a5060; background: #141826; color: #fff; padding: 8px 12px; }
.todoCreate button { min-height: 44px; border-radius: 10px; }
.todoRow { display: grid; grid-template-columns: 100px 1fr auto; align-items: center; margin-bottom: 10px; border-radius: 14px; padding: 12px; background: #292d39; gap: 8px; }
.todoRow.isDone { opacity: .64; }
.todoContent p { margin: 4px 0 0; color: #b6bbca; }
.todoActions { display: flex; gap: 6px; }
.iconBtn { width: 44px; height: 44px; border-radius: 12px; }
.iconBtn.delete { background: #4a2f2f; }

.monthHead { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; gap: 8px; }
.monthHead button { min-height: 44px; }
.calendarLayout { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items: start; }
.grid { display: grid; grid-template-columns: repeat(7,minmax(0,1fr)); gap: 6px; }
.weekday { text-align: center; font-size: 12px; color: #aeb2c1; }
.grid button { min-height: 56px; position: relative; border-radius: 10px; }
.grid button:disabled { opacity: .3; cursor: default; }
.grid button.active { border-color: var(--line); color: var(--line); }
.dot { position: absolute; width: 8px; height: 8px; border-radius: 50%; right: 6px; bottom: 5px; background: #9aa0af; }
.dot.move { background: #7dd55c; }
.dot.deadline { background: #e7c85f; }

.dayList .mini { margin: 6px 0; padding: 8px; border-radius: 10px; background: #2f3340; display: flex; justify-content: space-between; align-items: center; gap: 8px; min-height: 44px; }
.dayList .mini.isDone { opacity: .62; }

.sheetBackdrop { position: fixed; inset: 0; background: rgba(0,0,0,.45); display: grid; align-items: end; }
.sheet { background: #1d2230; padding: 16px; border-radius: 18px 18px 0 0; display: grid; gap: 8px; }
.sheet input, .sheet select, .sheet button { min-height: 44px; border-radius: 10px; border: 1px solid #4a5060; background: #141826; color: #fff; padding: 8px; }

@media (max-width: 767px) {
  .app { grid-template-columns: 1fr; }
  .sideNav, .detailPanel { display: none; }
  .bottomNav { display: grid; }
  .main { max-width: 430px; padding: 14px 16px 96px; }
  .node { padding-left: 56px; }
  .node .time { font-size: 16px; top: 30px; }
  .node .card { grid-template-columns: auto 1fr auto; padding: 12px; }
  .catObj { min-width: 72px; min-height: 68px; }
  .catObj.sm .catEmoji { font-size: 56px; }
  .catObj.md .catEmoji { font-size: 62px; }
  .catObj.lg .catEmoji { font-size: 70px; }
  .calendarLayout { grid-template-columns: 1fr; }
  .todoRow { grid-template-columns: 90px 1fr; }
  .todoActions { grid-column: 1 / -1; justify-content: flex-end; }
}

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}
